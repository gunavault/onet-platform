
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Redirect Service</title>
    <!-- Use Tailwind CSS for a clean, responsive layout -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4">

    <div id="status-card" class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-md text-center">
        <div id="loader" class="mb-4">
            <svg class="animate-spin h-8 w-8 text-indigo-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
        </div>
        <h1 id="status-title" class="text-xl font-bold text-gray-800 mb-2">Looking up short link...</h1>
        <p id="status-message" class="text-gray-500">You should be redirected momentarily.</p>
        <a id="redirect-link" href="#" class="hidden mt-4 inline-block text-indigo-600 hover:text-indigo-800 font-medium">Click here if nothing happens.</a>
    </div>

    <script>
        // The embedded JSON map generated by the Python script
        const linkMap = {
    "testing": "https://www.google.com"
};
        
        // Base URL for the public display
        const BASE_URL = "https://gunavault.github.io/onet-platform/";

        /**
         * Utility function to get query parameters from the URL
         * Expects a URL structure like: https://your.domain/?c=shortcode
         */
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        function initRedirect() {
            const shortCode = getQueryParam('c');
            const statusTitle = document.getElementById('status-title');
            const statusMessage = document.getElementById('status-message');
            const redirectLink = document.getElementById('redirect-link');
            const loader = document.getElementById('loader');

            if (shortCode) {
                const targetUrl = linkMap[shortCode];
                
                if (targetUrl) {
                    // Found the link, proceed to redirect
                    loader.innerHTML = '<span class="text-3xl">‚úÖ</span>';
                    statusTitle.textContent = "Success! Redirecting...";
                    statusMessage.textContent = "Redirecting to " + targetUrl.substring(0, 50) + '...';
                    redirectLink.href = targetUrl;
                    redirectLink.classList.remove('hidden');

                    // Perform the actual client-side redirect
                    window.location.replace(targetUrl);
                } else {
                    // Link not found
                    loader.innerHTML = '<span class="text-3xl">‚ùå</span>';
                    statusTitle.textContent = "Error: Link Not Found";
                    statusMessage.textContent = "The short code '" + shortCode + "' does not exist in our system.";
                }
            } else {
                // No short code provided (user landed on the root page)
                loader.innerHTML = '<span class="text-3xl">üîó</span>';
                statusTitle.textContent = "Static URL Shortener Base";
                statusMessage.innerHTML = "Append `?c=yourcode` to the URL to test a short link.<br>Current links are managed via the local Python tool.";
            }
        }

        // Run the redirection logic when the page loads
        initRedirect();
    </script>
</body>
</html>
